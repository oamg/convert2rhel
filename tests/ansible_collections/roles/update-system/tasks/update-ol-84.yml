---
# On OL8.4 we cannot run update with appstream repo as it contains
# updated versions (8.5), creating dependency problems in
# yum transaction.
- name: Update system - Oracle Linux 8.4
  yum:
    name: "*"
    state: latest
    # In case the package is already installed on the system (by user or CI system)
    # and the version of the package is not the latest in copr repo it would be
    # updated at this point. The package version would then differ from the intended one.
    exclude: convert2rhel
    disablerepo: "*"
    enablerepo: ol8_baseos_latest
  register: update
