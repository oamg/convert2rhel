summary: Basic sanity checks
description: |
    Verify basic sanity behavior.
        - Man page exists
        - Display help
        - Enforce root privileges
        - Only last version of Convert2RHEL supported
        - Yum cache cleaned before any other check
        - Missing RHSM certificates logged properly
        - Deprecated --variant message displayed

tier: 0

tag+:
    - nondestructive
    - sanity

/root_privileges:
    tag+:
        - root-privileges
    test: |
      pytest -svv -m root_privileges

/manpage:
    tag+:
        - manpage
    test: |
      pytest -svv -m manpage

/smoke:
    tag+:
        - smoke
    test: |
      pytest -svv -m smoke

/log_file_exists:
    tag+:
        - log-file
    test: |
      pytest -svv -m log_file_exists

/version_latest_or_newer:
    tag+:
        - version-latest-or-newer
    test: |
      pytest -svv -m version_latest_or_newer

/version_older_no_envar:
    tag+:
        - version-older-no-envar
    test: |
      pytest -svv -m version_older_no_envar

/version_older_with_envar:
    tag+:
        - version-older-with-envar
    test: |
      pytest -svv -m version_older_with_envar

/clean_cache:
    tag+:
        - clean-cache
    test: |
      pytest -svv -m clean_cache

/log_rhsm_error:
    tag+:
        - log-rhsm-error
    test: |
      pytest -svv -m log_rhsm_error

/variant_message:
    tag+:
        - variant-message
    test: |
      pytest -svv -m variant_message

/data_collection_acknowledgement:
    tag+:
        - data-collection-acknowledgement
    test: |
      pytest -svv -m data_collection_acknowledgement

/disable_data_collection:
    adjust+:
        - environment+:
            CONVERT2RHEL_DISABLE_TELEMETRY: 1
    tag+:
        - disable-data-collection
    test: |
      pytest -svv -m disable_data_collection
